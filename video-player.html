<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player - AstroLearn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gradient-to-br from-[#0B0F2F] via-[#482880] to-[#0B0F2F] min-h-screen text-[#F5F7FA] overflow-x-hidden">
    <!-- Floating Stars Background -->
    <div id="floatingStars"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <img src="sticker.webp" alt="AstroLearn Logo" class="h-12 w-12 object-contain">
                <a href="index.html" class="text-2xl font-bold bg-gradient-to-r from-[#4FC3F7] to-[#FF6EC7] bg-clip-text text-transparent">
                    AstroLearn
                </a>
            </div>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="index.html" class="nav-link">Home</a>
                <a href="dashboard.html" class="nav-link protected-link">Dashboard</a>
                <a href="schedule.html" class="nav-link protected-link">Schedule</a>
                <a href="resources.html" class="nav-link protected-link">Resources</a>
                <a href="videos.html" class="nav-link protected-link">Videos</a>
                <a href="games.html" class="nav-link protected-link">Games</a>
                <a href="login.html" class="btn-secondary py-2 px-4 text-sm" id="authBtn">Sign In</a>
            </div>
            <button class="md:hidden text-2xl" id="mobileMenuBtn">‚ò∞</button>
        </div>
        <div class="md:hidden hidden" id="mobileMenu">
            <div class="flex flex-col space-y-2 p-4">
                <a href="index.html" class="nav-link">Home</a>
                <a href="dashboard.html" class="nav-link protected-link">Dashboard</a>
                <a href="schedule.html" class="nav-link protected-link">Schedule</a>
                <a href="resources.html" class="nav-link protected-link">Resources</a>
                <a href="videos.html" class="nav-link protected-link">Videos</a>
                <a href="games.html" class="nav-link protected-link">Games</a>
                <a href="login.html" class="btn-secondary py-2 px-4 text-center block" id="authBtnMobile">Sign In</a>
            </div>
        </div>
    </nav>

    <!-- Video Player Section -->
    <section class="container mx-auto px-6 py-12">
        <div class="max-w-5xl mx-auto">
            <!-- Video Info -->
            <div class="glass-card p-6 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h1 class="text-3xl md:text-4xl font-bold mb-2" id="videoTitle">
                            <span class="bg-gradient-to-r from-[#4FC3F7] to-[#FF6EC7] bg-clip-text text-transparent">
                                Loading Video...
                            </span>
                        </h1>
                        <div class="flex items-center gap-4 text-[#F5F7FA]/70">
                            <span id="videoSubject" class="font-semibold">Subject</span>
                            <span>‚Ä¢</span>
                            <span id="videoDuration">Duration</span>
                        </div>
                    </div>
                    <a href="videos.html" class="btn-secondary">
                        ‚Üê Back to Videos
                    </a>
                </div>
                <p class="text-lg text-[#F5F7FA]/80" id="videoDescription">
                    Video description will appear here.
                </p>
            </div>

            <!-- Video Player -->
            <div class="glass-card p-6 mb-6">
                <div class="relative w-full" style="padding-bottom: 56.25%; background: #000; border-radius: 12px; overflow: hidden;">
                    <video 
                        id="videoPlayer" 
                        class="absolute top-0 left-0 w-full h-full"
                        controls
                        preload="metadata"
                        style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);"
                    >
                        <source id="videoSource" src="" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                
                <!-- Video Controls Info -->
                <div class="mt-4 text-center text-sm text-[#F5F7FA]/70">
                    <p>Use the video controls above to play, pause, adjust volume, and toggle fullscreen.</p>
                </div>
            </div>

            <!-- Placeholder Notice -->
            <div class="glass-card p-6 bg-[#4FC3F7]/10 border-2 border-[#4FC3F7]/30">
                <p class="text-center text-sm text-[#F5F7FA]/80">
                    <strong>Note:</strong> This is a demo prototype. The placeholder video files can be replaced with actual educational video content (MP4 format) in the <code class="bg-[#0B0F2F]/50 px-2 py-1 rounded">assets/videos/</code> folder for production use.
                </p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container mx-auto px-6 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <div class="flex items-center gap-2">
                        <img src="sticker.webp" alt="AstroLearn Logo" class="w-6 h-6">
                        <p class="text-sm text-[#F5F7FA]/70">Powered by AstroLearn</p>
                    </div>
                </div>
                <div class="flex space-x-6">
                    <a href="about.html" class="footer-link">About</a>
                    <a href="contact.html" class="footer-link">Contact</a>
                    <a href="privacy.html" class="footer-link">Privacy</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Video filename mapping
        const videoFileMap = {
            // Math videos
            'Introduction to Algebra': { file: 'math-algebra-intro.mp4', subject: 'Math', duration: '12:30' },
            'Solving Linear Equations': { file: 'math-linear-equations.mp4', subject: 'Math', duration: '15:45' },
            'Quadratic Equations Explained': { file: 'math-quadratic-equations.mp4', subject: 'Math', duration: '18:20' },
            'Graphing Functions': { file: 'math-graphing-functions.mp4', subject: 'Math', duration: '14:50' },
            'Polynomial Operations': { file: 'math-polynomials.mp4', subject: 'Math', duration: '16:15' },
            'Systems of Equations': { file: 'math-systems-equations.mp4', subject: 'Math', duration: '17:30' },
            
            // Science videos
            'Cell Structure and Function': { file: 'science-cell-structure.mp4', subject: 'Science', duration: '15:45' },
            'Photosynthesis Process': { file: 'science-photosynthesis.mp4', subject: 'Science', duration: '13:25' },
            'Genetics and Heredity': { file: 'science-genetics.mp4', subject: 'Science', duration: '16:40' },
            'Chemical Reactions': { file: 'science-chemical-reactions.mp4', subject: 'Science', duration: '14:20' },
            'Forces and Motion': { file: 'science-forces-motion.mp4', subject: 'Science', duration: '15:10' },
            'Ecosystems and Food Webs': { file: 'science-ecosystems.mp4', subject: 'Science', duration: '17:55' },
            
            // Reading videos
            'Reading Comprehension Strategies': { file: 'reading-comprehension.mp4', subject: 'Reading', duration: '12:30' },
            'Literary Analysis Basics': { file: 'reading-literary-analysis.mp4', subject: 'Reading', duration: '14:45' },
            'Identifying Main Ideas': { file: 'reading-main-ideas.mp4', subject: 'Reading', duration: '11:20' },
            'Character Development': { file: 'reading-character-development.mp4', subject: 'Reading', duration: '13:15' },
            'Text Structure and Organization': { file: 'reading-text-structure.mp4', subject: 'Reading', duration: '12:50' },
            'Making Inferences': { file: 'reading-inferences.mp4', subject: 'Reading', duration: '14:30' },
            
            // Language videos
            'Spanish Greetings and Basics': { file: 'language-spanish-greetings.mp4', subject: 'Language', duration: '10:20' },
            'French Pronunciation Guide': { file: 'language-french-pronunciation.mp4', subject: 'Language', duration: '11:45' },
            'Verb Conjugation Made Easy': { file: 'language-verb-conjugation.mp4', subject: 'Language', duration: '15:30' },
            'Building Vocabulary': { file: 'language-vocabulary.mp4', subject: 'Language', duration: '12:15' },
            'Common Phrases and Expressions': { file: 'language-phrases.mp4', subject: 'Language', duration: '13:40' },
            'Grammar Fundamentals': { file: 'language-grammar.mp4', subject: 'Language', duration: '14:25' }
        };

        // Video descriptions
        const videoDescriptions = {
            'Introduction to Algebra': 'Learn the basics of algebraic expressions and equations',
            'Solving Linear Equations': 'Master techniques for solving one-step and two-step equations',
            'Quadratic Equations Explained': 'Understanding quadratic equations and their solutions',
            'Graphing Functions': 'Learn how to graph linear and quadratic functions',
            'Polynomial Operations': 'Adding, subtracting, and multiplying polynomials',
            'Systems of Equations': 'Solving systems using substitution and elimination',
            'Cell Structure and Function': 'Explore the organelles and their functions in cells',
            'Photosynthesis Process': 'Understanding how plants convert light into energy',
            'Genetics and Heredity': 'Learn about genes, DNA, and inheritance patterns',
            'Chemical Reactions': 'Types of reactions and balancing chemical equations',
            'Forces and Motion': 'Newton\'s laws and motion principles',
            'Ecosystems and Food Webs': 'Understanding ecological relationships',
            'Reading Comprehension Strategies': 'Techniques for understanding and analyzing texts',
            'Literary Analysis Basics': 'How to analyze theme, symbolism, and literary devices',
            'Identifying Main Ideas': 'Finding the central message in various texts',
            'Character Development': 'Analyzing character traits and motivations',
            'Text Structure and Organization': 'Understanding how texts are organized',
            'Making Inferences': 'Drawing conclusions from textual evidence',
            'Spanish Greetings and Basics': 'Essential Spanish phrases and greetings',
            'French Pronunciation Guide': 'Master French pronunciation and sounds',
            'Verb Conjugation Made Easy': 'Understanding verb tenses and conjugation',
            'Building Vocabulary': 'Effective strategies for learning new words',
            'Common Phrases and Expressions': 'Everyday phrases in Spanish and French',
            'Grammar Fundamentals': 'Essential grammar rules and structures'
        };

        // Check authentication
        document.addEventListener('DOMContentLoaded', () => {
            if (!checkAuth()) {
                return;
            }
            updateNavigation();
            initFloatingStars();
            setupMobileMenu();
            loadVideo();
        });

        function setupMobileMenu() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }
        }

        function loadVideo() {
            // Get video title from URL parameters or sessionStorage
            const urlParams = new URLSearchParams(window.location.search);
            const title = urlParams.get('title') || sessionStorage.getItem('selectedVideoTitle');
            
            if (!title || !videoFileMap[title]) {
                // If no valid video, redirect to videos page
                window.location.href = 'videos.html';
                return;
            }

            const videoInfo = videoFileMap[title];
            const videoPath = `assets/videos/${videoInfo.file}`;
            
            // Update page content
            document.getElementById('videoTitle').innerHTML = `
                <span class="bg-gradient-to-r from-[#4FC3F7] to-[#FF6EC7] bg-clip-text text-transparent">
                    ${title}
                </span>
            `;
            document.getElementById('videoSubject').textContent = videoInfo.subject;
            document.getElementById('videoDuration').textContent = videoInfo.duration;
            document.getElementById('videoDescription').textContent = videoDescriptions[title] || 'Educational video content';
            
            // Set video source
            const videoPlayer = document.getElementById('videoPlayer');
            const videoSource = document.getElementById('videoSource');
            videoSource.src = videoPath;
            videoPlayer.load();
            
            // Handle video load errors
            videoPlayer.addEventListener('error', (e) => {
                console.error('Video load error:', e);
                // Show a message if video fails to load
                const videoContainer = videoPlayer.parentElement;
                const existingError = videoContainer.querySelector('.video-error');
                if (existingError) existingError.remove();
                
                const errorMsg = document.createElement('div');
                errorMsg.className = 'video-error absolute inset-0 flex items-center justify-center text-white p-4 text-center z-10';
                errorMsg.style.background = 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)';
                errorMsg.innerHTML = `
                    <div>
                        <div class="text-6xl mb-4">üé•</div>
                        <p class="text-xl mb-2 font-bold">Placeholder Video</p>
                        <p class="text-sm opacity-75 mb-4">The video file exists but is a minimal placeholder.</p>
                        <p class="text-xs opacity-60">Replace with actual educational MP4 videos in the assets/videos/ folder for full functionality.</p>
                    </div>
                `;
                videoContainer.appendChild(errorMsg);
            });
            
            // Try to play video when loaded
            videoPlayer.addEventListener('loadedmetadata', () => {
                // Video metadata loaded successfully
                const errorMsg = videoPlayer.parentElement.querySelector('.video-error');
                if (errorMsg) errorMsg.remove();
            });
        }
    </script>
</body>
</html>
