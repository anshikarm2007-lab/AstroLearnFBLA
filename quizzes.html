<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice Quizzes - AstroLearn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gradient-to-br from-[#0B0F2F] via-[#482880] to-[#0B0F2F] min-h-screen text-[#F5F7FA] overflow-x-hidden">
    <!-- Floating Stars Background -->
    <div id="floatingStars"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <img src="sticker.webp" alt="AstroLearn Logo" class="h-8 w-8 object-contain">
                <a href="index.html" class="text-2xl font-bold bg-gradient-to-r from-[#4FC3F7] to-[#FF6EC7] bg-clip-text text-transparent">
                    AstroLearn
                </a>
            </div>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="index.html" class="nav-link">Home</a>
                <a href="dashboard.html" class="nav-link protected-link">Dashboard</a>
                <a href="schedule.html" class="nav-link protected-link">Schedule</a>
                <a href="resources.html" class="nav-link protected-link">Resources</a>
                <a href="game.html" class="nav-link protected-link">Space Quest</a>
                <a href="login.html" class="btn-secondary py-2 px-4 text-sm" id="authBtn">Sign In</a>
            </div>
            <button class="md:hidden text-2xl" id="mobileMenuBtn">‚ò∞</button>
        </div>
        <div class="md:hidden hidden" id="mobileMenu">
            <div class="flex flex-col space-y-2 p-4">
                <a href="index.html" class="nav-link">Home</a>
                <a href="dashboard.html" class="nav-link protected-link">Dashboard</a>
                <a href="schedule.html" class="nav-link protected-link">Schedule</a>
                <a href="resources.html" class="nav-link protected-link">Resources</a>
                <a href="game.html" class="nav-link protected-link">Space Quest</a>
                <a href="login.html" class="btn-secondary py-2 px-4 text-center" id="authBtnMobile">Sign In</a>
            </div>
        </div>
    </nav>

    <!-- Quizzes Header -->
    <section class="container mx-auto px-6 py-12">
        <div class="text-center mb-8">
            <div class="text-6xl mb-4">üìù</div>
            <h1 class="text-5xl md:text-7xl font-bold mb-4">
                <span class="bg-gradient-to-r from-[#4FC3F7] to-[#FF6EC7] bg-clip-text text-transparent">
                    Practice Quizzes
                </span>
            </h1>
            <p class="text-xl text-[#F5F7FA]/80">Test your knowledge based on completed lessons</p>
        </div>

        <!-- Subject Selection -->
        <div class="glass-card p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-center">Select Subject</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="subjectSelector">
                <!-- Subjects will be populated by JS -->
            </div>
        </div>

        <!-- Available Quizzes -->
        <div id="quizzesContainer" class="hidden">
            <div class="glass-card p-6 mb-6">
                <h2 class="text-2xl font-bold mb-4" id="currentSubjectTitle">Select a subject to view available quizzes</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4" id="quizzesGrid">
                    <!-- Quizzes will be populated by JS -->
                </div>
            </div>
        </div>

        <!-- Quiz Taking Interface -->
        <div id="quizInterface" class="hidden">
            <div class="glass-card p-8 mb-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold" id="quizTitle">Quiz</h2>
                    <div class="text-sm text-[#F5F7FA]/70">
                        Question <span id="currentQuestion">1</span> / <span id="totalQuestions">0</span>
                    </div>
                </div>

                <div class="mb-6">
                    <div class="progress-bar-container mb-2" style="height: 8px;">
                        <div class="progress-bar" id="quizProgressBar" style="width: 0%;"></div>
                    </div>
                </div>

                <div class="quiz-question glass-card p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4" id="questionText">Question</h3>
                    <div class="space-y-3" id="answerOptions">
                        <!-- Answer options will be populated by JS -->
                    </div>
                </div>

                <div class="flex justify-between">
                    <button class="btn-secondary" id="prevQuestionBtn" disabled>‚Üê Previous</button>
                    <button class="btn-primary" id="nextQuestionBtn">Next ‚Üí</button>
                    <button class="btn-primary hidden" id="submitQuizBtn">Submit Quiz</button>
                </div>
            </div>
        </div>

        <!-- Quiz Results -->
        <div id="quizResults" class="hidden">
            <div class="glass-card p-8 mb-6">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4" id="resultIcon">üéâ</div>
                    <h2 class="text-3xl font-bold mb-4" id="resultTitle">Quiz Complete!</h2>
                    <div class="text-5xl font-bold mb-4" id="resultScore">0%</div>
                    <p class="text-lg text-[#F5F7FA]/70 mb-6" id="resultMessage">Great job!</p>
                </div>
                
                <!-- Detailed Results -->
                <div class="mb-6">
                    <h3 class="text-2xl font-bold mb-4">Question Review</h3>
                    <div class="space-y-4" id="questionReview">
                        <!-- Question reviews will be populated here -->
                    </div>
                </div>
                
                <div class="flex gap-4 justify-center">
                    <button class="btn-primary" id="retakeQuizBtn">Retake Quiz</button>
                    <button class="btn-secondary" onclick="location.reload()">Take Another Quiz</button>
                    <a href="dashboard.html" class="btn-secondary">Back to Dashboard</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container mx-auto px-6 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-sm text-[#F5F7FA]/70 flex items-center gap-1"><img src="sticker.webp" alt="AstroLearn Logo" class="h-5 w-5 object-contain"> Powered by AstroLearn</p>
                </div>
                <div class="flex space-x-6">
                    <a href="about.html" class="footer-link">About</a>
                    <a href="contact.html" class="footer-link">Contact</a>
                    <a href="privacy.html" class="footer-link">Privacy</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Check authentication
        document.addEventListener('DOMContentLoaded', () => {
            if (!checkAuth()) {
                return;
            }
            updateNavigation();
            initFloatingStars();
            setupMobileMenu();
            loadSubjects();
        });

        function setupMobileMenu() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }
        }

        function getGradeLevel() {
            const prefs = localStorage.getItem('astrolearn_preferences');
            if (prefs) {
                try {
                    const preferences = JSON.parse(prefs);
                    return preferences.grade || 9;
                } catch (e) {
                    console.error('Error parsing preferences:', e);
                }
            }
            return 9;
        }

        function getSelectedSubjects() {
            const prefs = localStorage.getItem('astrolearn_preferences');
            if (prefs) {
                try {
                    const preferences = JSON.parse(prefs);
                    return preferences.subjects || ['math', 'science', 'reading', 'language'];
                } catch (e) {
                    console.error('Error parsing preferences:', e);
                }
            }
            return ['math', 'science', 'reading', 'language'];
        }

        function getCompletedLessons() {
            const completed = localStorage.getItem('astrolearn_completed_lessons');
            if (completed) {
                try {
                    return JSON.parse(completed);
                } catch (e) {
                    console.error('Error parsing completed lessons:', e);
                }
            }
            return [];
        }

        const subjects = [
            { id: 'math', name: 'Math', icon: 'üî≠', color: '#4FC3F7' },
            { id: 'science', name: 'Science', icon: 'üß¨', color: '#FF6EC7' },
            { id: 'reading', name: 'Reading', icon: 'üìö', color: '#482880' },
            { id: 'language', name: 'Language', icon: 'üåç', color: '#4FC3F7' }
        ];

        // Quiz questions by grade and subject
        const quizQuestionsByGrade = {
            6: {
                math: {
                    "Introduction to Fractions": [
                        { question: "What is 1/2 + 1/4?", options: ["2/4", "3/4", "1/6", "2/6"], correct: 1 },
                        { question: "Which fraction is larger: 1/3 or 1/4?", options: ["1/3", "1/4", "They're equal", "Cannot determine"], correct: 0 },
                        { question: "What is the decimal form of 3/4?", options: ["0.25", "0.5", "0.75", "1.0"], correct: 2 }
                    ],
                    "Decimal Operations": [
                        { question: "What is 2.5 + 3.7?", options: ["5.2", "6.2", "5.12", "6.12"], correct: 1 },
                        { question: "What is 5.8 - 2.3?", options: ["3.5", "3.3", "2.5", "2.3"], correct: 0 },
                        { question: "What is 0.5 √ó 4?", options: ["2.0", "2.5", "1.5", "0.2"], correct: 0 }
                    ]
                },
                science: {
                    "Introduction to Matter": [
                        { question: "What are the three states of matter?", options: ["Solid, Liquid, Gas", "Hot, Cold, Warm", "Big, Medium, Small", "Hard, Soft, Medium"], correct: 0 },
                        { question: "What happens when water freezes?", options: ["It becomes a gas", "It becomes a solid", "It disappears", "It becomes a liquid"], correct: 1 },
                        { question: "What is matter made of?", options: ["Energy", "Atoms", "Light", "Sound"], correct: 1 }
                    ]
                },
                reading: {
                    "Basic Reading Comprehension": [
                        { question: "What is the main idea of a text?", options: ["The first sentence", "The most important point", "The title", "The last sentence"], correct: 1 },
                        { question: "What do supporting details do?", options: ["Contradict the main idea", "Explain or support the main idea", "Replace the main idea", "Hide the main idea"], correct: 1 }
                    ]
                },
                language: {
                    "Basic Greetings": [
                        { question: "How do you say 'Hello' in Spanish?", options: ["Hola", "Adi√≥s", "Gracias", "Por favor"], correct: 0 },
                        { question: "What does 'Bonjour' mean?", options: ["Goodbye", "Hello", "Thank you", "Please"], correct: 1 }
                    ]
                }
            },
            9: {
                math: {
                    "Algebra Basics": [
                        { question: "Solve for x: 2x + 5 = 13", options: ["x = 4", "x = 5", "x = 6", "x = 7"], correct: 0 },
                        { question: "What is the value of x in 3x - 7 = 14?", options: ["x = 5", "x = 6", "x = 7", "x = 8"], correct: 2 },
                        { question: "Simplify: 2x + 3x", options: ["5x", "6x", "5x¬≤", "6x¬≤"], correct: 0 }
                    ],
                    "Quadratic Equations": [
                        { question: "What is the solution to x¬≤ - 9 = 0?", options: ["x = 3", "x = -3", "x = 3 or x = -3", "x = 9"], correct: 2 },
                        { question: "What is the vertex form of a quadratic equation?", options: ["y = ax + b", "y = a(x-h)¬≤ + k", "y = mx + b", "y = ax¬≤"], correct: 1 }
                    ]
                },
                science: {
                    "Cell Biology": [
                        { question: "What is the powerhouse of the cell?", options: ["Nucleus", "Mitochondria", "Ribosome", "Cell membrane"], correct: 1 },
                        { question: "Where is DNA located in a cell?", options: ["Mitochondria", "Nucleus", "Cytoplasm", "Cell membrane"], correct: 1 },
                        { question: "What process do plants use to make food?", options: ["Respiration", "Photosynthesis", "Digestion", "Circulation"], correct: 1 }
                    ],
                    "Genetics": [
                        { question: "What is a gene?", options: ["A type of cell", "A unit of heredity", "A type of protein", "A type of molecule"], correct: 1 },
                        { question: "How many chromosomes do humans have?", options: ["23", "46", "44", "48"], correct: 1 }
                    ]
                },
                reading: {
                    "Reading Comprehension": [
                        { question: "What is the purpose of literary analysis?", options: ["To summarize the plot", "To examine meaning and techniques", "To memorize quotes", "To count pages"], correct: 1 },
                        { question: "What is a theme in literature?", options: ["The main character", "The setting", "The underlying message", "The plot"], correct: 2 }
                    ],
                    "Literary Analysis": [
                        { question: "What is symbolism?", options: ["Using symbols to represent ideas", "Writing in symbols", "Drawing symbols", "Speaking in symbols"], correct: 0 }
                    ]
                },
                language: {
                    "Spanish Basics": [
                        { question: "How do you say 'Thank you' in Spanish?", options: ["Hola", "Adi√≥s", "Gracias", "Por favor"], correct: 2 },
                        { question: "What is 'Good morning' in Spanish?", options: ["Buenas noches", "Buenos d√≠as", "Buenas tardes", "Hola"], correct: 1 }
                    ]
                }
            }
        };

        let currentSubject = null;
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];

        function loadSubjects() {
            const selector = document.getElementById('subjectSelector');
            const selectedSubjects = getSelectedSubjects();
            const availableSubjects = subjects.filter(s => selectedSubjects.includes(s.id));
            
            selector.innerHTML = availableSubjects.map(subject => `
                <button class="glass-card p-4 text-center hover:scale-105 transition-transform subject-btn" 
                        data-subject="${subject.id}"
                        style="border: 2px solid ${subject.color}33;">
                    <div class="text-4xl mb-2">${subject.icon}</div>
                    <div class="font-bold">${subject.name}</div>
                </button>
            `).join('');

            document.querySelectorAll('.subject-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    loadQuizzes(btn.dataset.subject);
                });
            });
        }

        function loadQuizzes(subjectId) {
            const grade = getGradeLevel();
            currentSubject = subjectId;
            document.getElementById('quizzesContainer').classList.remove('hidden');
            const subject = subjects.find(s => s.id === subjectId);
            document.getElementById('currentSubjectTitle').textContent = `${subject.name} Practice Quizzes - Grade ${grade}`;
            
            // Create 6 quizzes for each subject
            const quizTitles = getQuizTitles(subjectId, grade);
            
            const grid = document.getElementById('quizzesGrid');
            grid.innerHTML = quizTitles.map((title, index) => {
                const quizId = `${subjectId}_${grade}_quiz_${index + 1}`;
                return `
                    <div class="glass-card p-6 hover:scale-105 transition-transform">
                        <h3 class="text-xl font-bold mb-2">${title}</h3>
                        <p class="text-sm text-[#F5F7FA]/70 mb-4">10 questions</p>
                        <button class="btn-primary w-full start-quiz-btn" data-quiz-id="${quizId}" data-quiz-title="${title}">
                            Start Quiz
                        </button>
                    </div>
                `;
            }).join('');

            document.querySelectorAll('.start-quiz-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    startQuiz(btn.dataset.quizId, btn.dataset.quizTitle);
                });
            });
        }
        
        function getQuizTitles(subjectId, grade) {
            const titles = {
                math: {
                    6: ['Fractions Basics', 'Decimal Operations', 'Geometry Fundamentals', 'Area and Perimeter', 'Ratios and Proportions', 'Basic Statistics'],
                    9: ['Algebra Basics', 'Linear Equations', 'Quadratic Equations', 'Systems of Equations', 'Exponents and Radicals', 'Polynomials'],
                    12: ['Calculus: Limits', 'Derivatives', 'Integration', 'Applications of Calculus', 'Advanced Trigonometry', 'Probability and Statistics']
                },
                science: {
                    6: ['Introduction to Cells', 'States of Matter', 'The Solar System', 'Food Chains', 'Weather and Climate', 'Simple Machines'],
                    9: ['Cell Biology', 'Genetics and Heredity', 'Chemical Reactions', 'Forces and Motion', 'Energy and Work', 'Ecology'],
                    12: ['Organic Chemistry', 'Molecular Biology', 'Electromagnetism', 'Thermodynamics', 'Evolution', 'Environmental Science']
                },
                reading: {
                    6: ['Reading Comprehension', 'Vocabulary Building', 'Story Elements', 'Making Inferences', 'Summarizing', 'Poetry Basics'],
                    9: ['Literary Analysis', 'Character Development', 'Critical Reading', 'Shakespeare', 'Essay Writing', 'Research Skills'],
                    12: ['Literary Theory', 'Rhetorical Analysis', 'Modern Literature', 'Advanced Writing', 'Comparative Literature', 'Research Papers']
                },
                language: {
                    6: ['Basic Greetings', 'Numbers 1-100', 'Colors and Shapes', 'Family Members', 'Common Verbs', 'Days and Months'],
                    9: ['Present Tense', 'Past Tense', 'Future Tense', 'Subjunctive Mood', 'Complex Sentences', 'Conversational Skills'],
                    12: ['Advanced Grammar', 'Literary Analysis', 'Formal Writing', 'Cultural Studies', 'Advanced Conversation', 'Translation Skills']
                }
            };
            return titles[subjectId]?.[grade] || titles[subjectId]?.[9] || ['Quiz 1', 'Quiz 2', 'Quiz 3', 'Quiz 4', 'Quiz 5', 'Quiz 6'];
        }

        function startQuiz(quizId, quizTitle) {
            const grade = getGradeLevel();
            const questions = generateQuizQuestions(quizId, currentSubject, grade);
            
            currentQuiz = { id: quizId, title: quizTitle, questions };
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);

            document.getElementById('quizzesContainer').classList.add('hidden');
            document.getElementById('quizInterface').classList.remove('hidden');
            document.getElementById('quizResults').classList.add('hidden');
            
            document.getElementById('quizTitle').textContent = `${quizTitle} Quiz`;
            document.getElementById('totalQuestions').textContent = questions.length;
            
            showQuestion();
        }
        
        function generateQuizQuestions(quizId, subject, grade) {
            // Generate 10 questions for each quiz based on subject and grade
            const questionTemplates = getQuestionTemplates(subject, grade);
            const quizNum = parseInt(quizId.split('_').pop());
            const startIndex = (quizNum - 1) * 10;
            
            return questionTemplates.slice(startIndex, startIndex + 10).map((q, i) => ({
                question: q.question,
                options: q.options,
                correct: q.correct,
                explanation: q.explanation || `The correct answer is: ${q.options[q.correct]}`
            }));
        }
        
        function getQuestionTemplates(subject, grade) {
            // Return 60 questions (10 per quiz √ó 6 quizzes) for each subject/grade combination
            const allQuestions = {
                math: {
                    6: generateMathQuestions6(),
                    9: generateMathQuestions9(),
                    12: generateMathQuestions12()
                },
                science: {
                    6: generateScienceQuestions6(),
                    9: generateScienceQuestions9(),
                    12: generateScienceQuestions12()
                },
                reading: {
                    6: generateReadingQuestions6(),
                    9: generateReadingQuestions9(),
                    12: generateReadingQuestions12()
                },
                language: {
                    6: generateLanguageQuestions6(),
                    9: generateLanguageQuestions9(),
                    12: generateLanguageQuestions12()
                }
            };
            return allQuestions[subject]?.[grade] || allQuestions[subject]?.[9] || [];
        }
        
        // Math question generators (60 questions each grade = 6 quizzes √ó 10 questions)
        function generateMathQuestions6() {
            const questions = [
                { question: "What is 1/2 + 1/4?", options: ["2/4", "3/4", "1/6", "2/6"], correct: 1, explanation: "To add fractions, find a common denominator. 1/2 = 2/4, so 2/4 + 1/4 = 3/4" },
                { question: "Which fraction is larger: 1/3 or 1/4?", options: ["1/3", "1/4", "They're equal", "Cannot determine"], correct: 0, explanation: "When denominators are different, the fraction with the smaller denominator is larger. 1/3 > 1/4" },
                { question: "What is the decimal form of 3/4?", options: ["0.25", "0.5", "0.75", "1.0"], correct: 2, explanation: "3 divided by 4 equals 0.75" },
                { question: "What is 2.5 + 3.7?", options: ["5.2", "6.2", "5.12", "6.12"], correct: 1, explanation: "2.5 + 3.7 = 6.2" },
                { question: "What is 5.8 - 2.3?", options: ["3.5", "3.3", "2.5", "2.3"], correct: 0, explanation: "5.8 - 2.3 = 3.5" },
                { question: "What is 0.5 √ó 4?", options: ["2.0", "2.5", "1.5", "0.2"], correct: 0, explanation: "0.5 √ó 4 = 2.0" },
                { question: "What is the area of a rectangle with length 5 and width 3?", options: ["8", "15", "16", "20"], correct: 1, explanation: "Area = length √ó width = 5 √ó 3 = 15" },
                { question: "What is the perimeter of a square with side length 4?", options: ["8", "12", "16", "20"], correct: 2, explanation: "Perimeter = 4 √ó side = 4 √ó 4 = 16" },
                { question: "What is 3:6 in simplest form?", options: ["1:2", "1:3", "2:3", "3:6"], correct: 0, explanation: "Divide both by 3: 3:6 = 1:2" },
                { question: "What is 25% of 80?", options: ["20", "25", "30", "40"], correct: 0, explanation: "25% of 80 = 0.25 √ó 80 = 20" },
                { question: "What is 1/3 + 1/6?", options: ["1/9", "1/2", "2/9", "2/3"], correct: 1, explanation: "1/3 = 2/6, so 2/6 + 1/6 = 3/6 = 1/2" },
                { question: "What is 4.2 √∑ 2?", options: ["2.1", "2.2", "2.0", "2.4"], correct: 0, explanation: "4.2 √∑ 2 = 2.1" },
                { question: "What is the area of a triangle with base 6 and height 4?", options: ["10", "12", "24", "20"], correct: 1, explanation: "Area = (1/2) √ó base √ó height = (1/2) √ó 6 √ó 4 = 12" },
                { question: "What is 50% as a fraction?", options: ["1/4", "1/2", "1/3", "2/3"], correct: 1, explanation: "50% = 50/100 = 1/2" },
                { question: "What is 0.8 as a fraction?", options: ["4/5", "3/4", "2/3", "1/2"], correct: 0, explanation: "0.8 = 8/10 = 4/5" },
                { question: "What is 12 √ó 5?", options: ["50", "60", "70", "55"], correct: 1, explanation: "12 √ó 5 = 60" },
                { question: "What is 48 √∑ 6?", options: ["6", "7", "8", "9"], correct: 2, explanation: "48 √∑ 6 = 8" },
                { question: "What is the perimeter of a rectangle with length 7 and width 3?", options: ["20", "21", "10", "17"], correct: 0, explanation: "Perimeter = 2 √ó (length + width) = 2 √ó (7 + 3) = 20" },
                { question: "What is 1/4 of 20?", options: ["4", "5", "6", "8"], correct: 1, explanation: "1/4 of 20 = 20 √∑ 4 = 5" },
                { question: "What is 3.5 + 2.8?", options: ["5.3", "6.3", "5.8", "6.1"], correct: 1, explanation: "3.5 + 2.8 = 6.3" },
                { question: "What is 10 - 4.5?", options: ["5.5", "6.5", "4.5", "5.0"], correct: 0, explanation: "10 - 4.5 = 5.5" },
                { question: "What is 2/5 + 1/5?", options: ["3/5", "3/10", "1/5", "2/5"], correct: 0, explanation: "2/5 + 1/5 = 3/5" },
                { question: "What is the area of a circle with radius 3? (Use œÄ = 3.14)", options: ["18.84", "28.26", "9.42", "12.56"], correct: 1, explanation: "Area = œÄ √ó r¬≤ = 3.14 √ó 3¬≤ = 3.14 √ó 9 = 28.26" },
                { question: "What is 15% of 40?", options: ["5", "6", "7", "8"], correct: 1, explanation: "15% of 40 = 0.15 √ó 40 = 6" },
                { question: "What is 7 √ó 8?", options: ["54", "56", "58", "60"], correct: 1, explanation: "7 √ó 8 = 56" },
                { question: "What is 63 √∑ 7?", options: ["8", "9", "10", "11"], correct: 1, explanation: "63 √∑ 7 = 9" },
                { question: "What is 1/2 √ó 1/3?", options: ["1/5", "1/6", "2/5", "2/6"], correct: 1, explanation: "Multiply numerators and denominators: (1√ó1)/(2√ó3) = 1/6" },
                { question: "What is 0.25 as a fraction?", options: ["1/4", "1/3", "1/2", "2/5"], correct: 0, explanation: "0.25 = 25/100 = 1/4" },
                { question: "What is the mean of 4, 6, 8, 10?", options: ["6", "7", "8", "9"], correct: 1, explanation: "Mean = (4+6+8+10)/4 = 28/4 = 7" },
                { question: "What is 5¬≤?", options: ["20", "25", "30", "35"], correct: 1, explanation: "5¬≤ = 5 √ó 5 = 25" },
                { question: "What is ‚àö36?", options: ["4", "5", "6", "7"], correct: 2, explanation: "‚àö36 = 6 because 6 √ó 6 = 36" },
                { question: "What is 3¬≥?", options: ["9", "18", "27", "36"], correct: 2, explanation: "3¬≥ = 3 √ó 3 √ó 3 = 27" },
                { question: "What is 2/3 - 1/3?", options: ["1/3", "1/6", "2/3", "1"], correct: 0, explanation: "2/3 - 1/3 = 1/3" },
                { question: "What is 4.5 √ó 2?", options: ["8", "9", "8.5", "9.5"], correct: 1, explanation: "4.5 √ó 2 = 9" },
                { question: "What is 18 √∑ 3?", options: ["5", "6", "7", "8"], correct: 1, explanation: "18 √∑ 3 = 6" },
                { question: "What is 1/5 of 25?", options: ["4", "5", "6", "7"], correct: 1, explanation: "1/5 of 25 = 25 √∑ 5 = 5" },
                { question: "What is 0.6 as a fraction?", options: ["3/5", "2/3", "1/2", "4/5"], correct: 0, explanation: "0.6 = 6/10 = 3/5" },
                { question: "What is the perimeter of a triangle with sides 3, 4, and 5?", options: ["10", "12", "14", "16"], correct: 1, explanation: "Perimeter = 3 + 4 + 5 = 12" },
                { question: "What is 20% of 50?", options: ["8", "10", "12", "15"], correct: 1, explanation: "20% of 50 = 0.20 √ó 50 = 10" },
                { question: "What is 9 √ó 6?", options: ["52", "54", "56", "58"], correct: 1, explanation: "9 √ó 6 = 54" },
                { question: "What is 72 √∑ 8?", options: ["8", "9", "10", "11"], correct: 1, explanation: "72 √∑ 8 = 9" },
                { question: "What is 1/4 + 1/4?", options: ["1/8", "1/4", "1/2", "2/4"], correct: 2, explanation: "1/4 + 1/4 = 2/4 = 1/2" },
                { question: "What is 6.3 - 2.1?", options: ["4.0", "4.2", "4.4", "4.6"], correct: 1, explanation: "6.3 - 2.1 = 4.2" },
                { question: "What is the area of a square with side 5?", options: ["20", "25", "30", "35"], correct: 1, explanation: "Area = side¬≤ = 5¬≤ = 25" },
                { question: "What is 75% as a fraction?", options: ["1/4", "1/2", "3/4", "4/5"], correct: 2, explanation: "75% = 75/100 = 3/4" },
                { question: "What is 8 √ó 7?", options: ["54", "56", "58", "60"], correct: 1, explanation: "8 √ó 7 = 56" },
                { question: "What is 56 √∑ 7?", options: ["7", "8", "9", "10"], correct: 1, explanation: "56 √∑ 7 = 8" },
                { question: "What is 1/3 √ó 6?", options: ["1", "2", "3", "4"], correct: 1, explanation: "1/3 √ó 6 = 6/3 = 2" },
                { question: "What is 0.9 as a fraction?", options: ["8/9", "9/10", "7/8", "6/7"], correct: 1, explanation: "0.9 = 9/10" },
                { question: "What is the median of 2, 4, 6, 8, 10?", options: ["4", "5", "6", "8"], correct: 2, explanation: "Median is the middle value: 6" },
                { question: "What is 4¬≤?", options: ["12", "16", "20", "24"], correct: 1, explanation: "4¬≤ = 4 √ó 4 = 16" },
                { question: "What is ‚àö25?", options: ["4", "5", "6", "7"], correct: 1, explanation: "‚àö25 = 5 because 5 √ó 5 = 25" },
                { question: "What is 2‚Å¥?", options: ["12", "14", "16", "18"], correct: 2, explanation: "2‚Å¥ = 2 √ó 2 √ó 2 √ó 2 = 16" },
                { question: "What is 3/4 - 1/4?", options: ["1/4", "1/2", "2/4", "1"], correct: 1, explanation: "3/4 - 1/4 = 2/4 = 1/2" },
                { question: "What is 5.5 + 3.5?", options: ["8", "9", "8.5", "9.5"], correct: 1, explanation: "5.5 + 3.5 = 9" },
                { question: "What is 45 √∑ 5?", options: ["8", "9", "10", "11"], correct: 1, explanation: "45 √∑ 5 = 9" },
                { question: "What is 1/6 of 24?", options: ["3", "4", "5", "6"], correct: 1, explanation: "1/6 of 24 = 24 √∑ 6 = 4" },
                { question: "What is 0.75 as a fraction?", options: ["1/4", "1/2", "3/4", "4/5"], correct: 2, explanation: "0.75 = 75/100 = 3/4" },
                { question: "What is the perimeter of a rectangle with length 8 and width 5?", options: ["24", "26", "28", "30"], correct: 1, explanation: "Perimeter = 2 √ó (8 + 5) = 2 √ó 13 = 26" },
                { question: "What is 30% of 60?", options: ["16", "18", "20", "22"], correct: 1, explanation: "30% of 60 = 0.30 √ó 60 = 18" },
                { question: "What is 11 √ó 5?", options: ["53", "54", "55", "56"], correct: 2, explanation: "11 √ó 5 = 55" },
                { question: "What is 81 √∑ 9?", options: ["8", "9", "10", "11"], correct: 1, explanation: "81 √∑ 9 = 9" }
            ];
            return questions.slice(0, 60); // Ensure exactly 60 questions
        }
        
        function generateMathQuestions9() {
            const baseQuestions = [
                { question: "Solve for x: 2x + 5 = 13", options: ["x = 4", "x = 5", "x = 6", "x = 7"], correct: 0, explanation: "2x + 5 = 13 ‚Üí 2x = 8 ‚Üí x = 4" },
                { question: "What is the value of x in 3x - 7 = 14?", options: ["x = 5", "x = 6", "x = 7", "x = 8"], correct: 2, explanation: "3x - 7 = 14 ‚Üí 3x = 21 ‚Üí x = 7" },
                { question: "Simplify: 2x + 3x", options: ["5x", "6x", "5x¬≤", "6x¬≤"], correct: 0, explanation: "Combine like terms: 2x + 3x = 5x" },
                { question: "What is the solution to x¬≤ - 9 = 0?", options: ["x = 3", "x = -3", "x = 3 or x = -3", "x = 9"], correct: 2, explanation: "x¬≤ - 9 = 0 ‚Üí (x-3)(x+3) = 0 ‚Üí x = 3 or x = -3" },
                { question: "What is the vertex form of a quadratic equation?", options: ["y = ax + b", "y = a(x-h)¬≤ + k", "y = mx + b", "y = ax¬≤"], correct: 1, explanation: "Vertex form is y = a(x-h)¬≤ + k where (h,k) is the vertex" },
                { question: "What is the slope of the line y = 2x + 3?", options: ["2", "3", "5", "6"], correct: 0, explanation: "In y = mx + b, m is the slope. Here m = 2" },
                { question: "What is the y-intercept of y = -x + 5?", options: ["-1", "1", "5", "-5"], correct: 2, explanation: "In y = mx + b, b is the y-intercept. Here b = 5" },
                { question: "Solve the system: x + y = 5, 2x - y = 1", options: ["x=2, y=3", "x=3, y=2", "x=1, y=4", "x=4, y=1"], correct: 0, explanation: "Add equations: 3x = 6 ‚Üí x = 2, then y = 3" },
                { question: "What is (x+2)(x+3)?", options: ["x¬≤+5x+6", "x¬≤+6x+5", "x¬≤+5x+5", "x¬≤+6x+6"], correct: 0, explanation: "(x+2)(x+3) = x¬≤ + 3x + 2x + 6 = x¬≤ + 5x + 6" },
                { question: "What is ‚àö16?", options: ["2", "4", "8", "16"], correct: 1, explanation: "‚àö16 = 4 because 4 √ó 4 = 16" }
            ];
            // Generate 50 more questions to reach 60 total
            const additional = Array.from({length: 50}, (_, i) => ({
                question: `Algebra Question ${i + 11}: Solve for x in ${2+i}x + ${3+i} = ${(2+i)*2 + 3+i}`,
                options: ["x = 1", "x = 2", "x = 3", "x = 4"],
                correct: (i % 4),
                explanation: `Sample explanation for question ${i + 11}`
            }));
            return [...baseQuestions, ...additional].slice(0, 60);
        }
        
        function generateMathQuestions12() {
            const base = [
                { question: "What is lim(x‚Üí2) x¬≤?", options: ["2", "4", "6", "8"], correct: 1, explanation: "As x approaches 2, x¬≤ approaches 4" },
                { question: "What is d/dx(x¬≤)?", options: ["x", "2x", "x¬≤", "2x¬≤"], correct: 1, explanation: "The derivative of x¬≤ is 2x" },
                { question: "What is ‚à´x dx?", options: ["x¬≤/2 + C", "x¬≤ + C", "x + C", "2x + C"], correct: 0, explanation: "The integral of x is x¬≤/2 + C" },
                { question: "What is d/dx(sin x)?", options: ["cos x", "-cos x", "sin x", "-sin x"], correct: 0, explanation: "The derivative of sin x is cos x" },
                { question: "What is the chain rule for d/dx(f(g(x)))?", options: ["f'(g(x))", "f'(g(x))g'(x)", "f(g'(x))", "f'(x)g'(x)"], correct: 1, explanation: "Chain rule: f'(g(x)) √ó g'(x)" }
            ];
            return [...base, ...Array.from({length: 55}, (_, i) => ({
                question: `Calculus Question ${i + 6}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }))].slice(0, 60);
        }
        
        function generateScienceQuestions6() {
            const base = [
                { question: "What are the three states of matter?", options: ["Solid, Liquid, Gas", "Hot, Cold, Warm", "Big, Medium, Small", "Hard, Soft, Medium"], correct: 0, explanation: "Matter exists in three states: solid, liquid, and gas" },
                { question: "What happens when water freezes?", options: ["It becomes a gas", "It becomes a solid", "It disappears", "It becomes a liquid"], correct: 1, explanation: "When water freezes, it changes from liquid to solid (ice)" },
                { question: "What is matter made of?", options: ["Energy", "Atoms", "Light", "Sound"], correct: 1, explanation: "All matter is made up of atoms" },
                { question: "What is the powerhouse of the cell?", options: ["Nucleus", "Mitochondria", "Ribosome", "Cell membrane"], correct: 1, explanation: "Mitochondria produce energy for the cell" },
                { question: "What process do plants use to make food?", options: ["Respiration", "Photosynthesis", "Digestion", "Circulation"], correct: 1, explanation: "Plants use photosynthesis to convert sunlight into food" }
            ];
            return [...base, ...Array.from({length: 55}, (_, i) => ({
                question: `Science Question ${i + 6}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }))].slice(0, 60);
        }
        
        function generateScienceQuestions9() {
            const base = [
                { question: "What is the powerhouse of the cell?", options: ["Nucleus", "Mitochondria", "Ribosome", "Cell membrane"], correct: 1, explanation: "Mitochondria produce ATP, the cell's energy currency" },
                { question: "Where is DNA located in a cell?", options: ["Mitochondria", "Nucleus", "Cytoplasm", "Cell membrane"], correct: 1, explanation: "DNA is stored in the nucleus" },
                { question: "What is a gene?", options: ["A type of cell", "A unit of heredity", "A type of protein", "A type of molecule"], correct: 1, explanation: "A gene is a unit of heredity that codes for proteins" },
                { question: "How many chromosomes do humans have?", options: ["23", "46", "44", "48"], correct: 1, explanation: "Humans have 46 chromosomes (23 pairs)" },
                { question: "What is the chemical formula for water?", options: ["H‚ÇÇO", "CO‚ÇÇ", "O‚ÇÇ", "H‚ÇÇ"], correct: 0, explanation: "Water is H‚ÇÇO - two hydrogen atoms and one oxygen atom" }
            ];
            return [...base, ...Array.from({length: 55}, (_, i) => ({
                question: `Biology Question ${i + 6}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }))].slice(0, 60);
        }
        
        function generateScienceQuestions12() {
            return Array.from({length: 60}, (_, i) => ({
                question: `Advanced Science Question ${i + 1}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }));
        }
        
        function generateReadingQuestions6() {
            const base = [
                { question: "What is the main idea of a text?", options: ["The first sentence", "The most important point", "The title", "The last sentence"], correct: 1, explanation: "The main idea is the most important point the author wants to convey" },
                { question: "What do supporting details do?", options: ["Contradict the main idea", "Explain or support the main idea", "Replace the main idea", "Hide the main idea"], correct: 1, explanation: "Supporting details provide evidence and explanation for the main idea" },
                { question: "What is a character in a story?", options: ["The setting", "A person or being in the story", "The plot", "The theme"], correct: 1, explanation: "Characters are the people or beings who participate in the story" },
                { question: "What is the setting of a story?", options: ["The main character", "Where and when the story takes place", "The problem", "The solution"], correct: 1, explanation: "Setting is the time and place where the story occurs" },
                { question: "What is a theme?", options: ["The main character", "The underlying message", "The setting", "The plot"], correct: 1, explanation: "Theme is the underlying message or lesson of the story" }
            ];
            return [...base, ...Array.from({length: 55}, (_, i) => ({
                question: `Reading Question ${i + 6}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }))].slice(0, 60);
        }
        
        function generateReadingQuestions9() {
            const base = [
                { question: "What is the purpose of literary analysis?", options: ["To summarize the plot", "To examine meaning and techniques", "To memorize quotes", "To count pages"], correct: 1, explanation: "Literary analysis examines deeper meaning, themes, and literary techniques" },
                { question: "What is a theme in literature?", options: ["The main character", "The setting", "The underlying message", "The plot"], correct: 2, explanation: "Theme is the underlying message or universal truth in literature" },
                { question: "What is symbolism?", options: ["Using symbols to represent ideas", "Writing in symbols", "Drawing symbols", "Speaking in symbols"], correct: 0, explanation: "Symbolism uses objects, characters, or events to represent deeper meanings" },
                { question: "What is a metaphor?", options: ["A comparison using 'like' or 'as'", "A direct comparison without 'like' or 'as'", "A type of character", "A setting"], correct: 1, explanation: "A metaphor directly compares two things without using 'like' or 'as'" },
                { question: "What is personification?", options: ["Making characters human", "Giving human traits to non-human things", "Describing people", "Creating dialogue"], correct: 1, explanation: "Personification gives human qualities to animals, objects, or ideas" }
            ];
            return [...base, ...Array.from({length: 55}, (_, i) => ({
                question: `Literature Question ${i + 6}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }))].slice(0, 60);
        }
        
        function generateReadingQuestions12() {
            return Array.from({length: 60}, (_, i) => ({
                question: `Advanced Reading Question ${i + 1}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }));
        }
        
        function generateLanguageQuestions6() {
            const base = [
                { question: "How do you say 'Hello' in Spanish?", options: ["Hola", "Adi√≥s", "Gracias", "Por favor"], correct: 0, explanation: "'Hola' means hello in Spanish" },
                { question: "What does 'Bonjour' mean?", options: ["Goodbye", "Hello", "Thank you", "Please"], correct: 1, explanation: "'Bonjour' is French for hello/good morning" },
                { question: "How do you say 'Thank you' in Spanish?", options: ["Hola", "Adi√≥s", "Gracias", "Por favor"], correct: 2, explanation: "'Gracias' means thank you in Spanish" },
                { question: "What is 'Good morning' in Spanish?", options: ["Buenas noches", "Buenos d√≠as", "Buenas tardes", "Hola"], correct: 1, explanation: "'Buenos d√≠as' means good morning in Spanish" },
                { question: "How do you say 'Goodbye' in Spanish?", options: ["Hola", "Adi√≥s", "Gracias", "Por favor"], correct: 1, explanation: "'Adi√≥s' means goodbye in Spanish" }
            ];
            return [...base, ...Array.from({length: 55}, (_, i) => ({
                question: `Language Question ${i + 6}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }))].slice(0, 60);
        }
        
        function generateLanguageQuestions9() {
            const base = [
                { question: "How do you say 'Thank you' in Spanish?", options: ["Hola", "Adi√≥s", "Gracias", "Por favor"], correct: 2, explanation: "'Gracias' means thank you" },
                { question: "What is 'Good morning' in Spanish?", options: ["Buenas noches", "Buenos d√≠as", "Buenas tardes", "Hola"], correct: 1, explanation: "'Buenos d√≠as' means good morning" },
                { question: "What is the present tense of 'hablar' (to speak) for 'yo'?", options: ["hablo", "hablas", "habla", "hablamos"], correct: 0, explanation: "'Yo hablo' means I speak" },
                { question: "What is 'ser' used for in Spanish?", options: ["Temporary states", "Permanent characteristics", "Actions", "Feelings"], correct: 1, explanation: "'Ser' is used for permanent characteristics, identity, and origin" },
                { question: "What is 'estar' used for in Spanish?", options: ["Permanent characteristics", "Temporary states and location", "Identity", "Origin"], correct: 1, explanation: "'Estar' is used for temporary states, feelings, and location" }
            ];
            return [...base, ...Array.from({length: 55}, (_, i) => ({
                question: `Spanish Question ${i + 6}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }))].slice(0, 60);
        }
        
        function generateLanguageQuestions12() {
            return Array.from({length: 60}, (_, i) => ({
                question: `Advanced Language Question ${i + 1}`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct: i % 4,
                explanation: "Sample explanation"
            }));
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            
            const optionsDiv = document.getElementById('answerOptions');
            optionsDiv.innerHTML = question.options.map((option, index) => `
                <label class="flex items-center p-4 glass-card cursor-pointer hover:bg-white/10 transition-all ${userAnswers[currentQuestionIndex] === index ? 'border-2 border-[#4FC3F7]' : ''}">
                    <input type="radio" name="answer" value="${index}" class="mr-3" ${userAnswers[currentQuestionIndex] === index ? 'checked' : ''}>
                    <span>${option}</span>
                </label>
            `).join('');

            document.querySelectorAll('input[name="answer"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    userAnswers[currentQuestionIndex] = parseInt(e.target.value);
                    updateAnswerStyles();
                });
            });

            document.getElementById('prevQuestionBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextQuestionBtn').classList.remove('hidden');
            document.getElementById('submitQuizBtn').classList.add('hidden');
            
            if (currentQuestionIndex === currentQuiz.questions.length - 1) {
                document.getElementById('nextQuestionBtn').classList.add('hidden');
                document.getElementById('submitQuizBtn').classList.remove('hidden');
            }

            const progress = ((currentQuestionIndex + 1) / currentQuiz.questions.length) * 100;
            document.getElementById('quizProgressBar').style.width = progress + '%';
        }

        function updateAnswerStyles() {
            document.querySelectorAll('#answerOptions label').forEach((label, index) => {
                if (userAnswers[currentQuestionIndex] === index) {
                    label.classList.add('border-2', 'border-[#4FC3F7]');
                } else {
                    label.classList.remove('border-2', 'border-[#4FC3F7]');
                }
            });
        }

        document.getElementById('prevQuestionBtn').addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        });

        document.getElementById('nextQuestionBtn').addEventListener('click', () => {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            }
        });

        document.getElementById('submitQuizBtn').addEventListener('click', () => {
            submitQuiz();
        });

        function submitQuiz() {
            let correct = 0;
            const results = [];
            
            currentQuiz.questions.forEach((question, index) => {
                const isCorrect = userAnswers[index] === question.correct;
                if (isCorrect) correct++;
                
                results.push({
                    question: question.question,
                    userAnswer: userAnswers[index] !== null ? question.options[userAnswers[index]] : 'Not answered',
                    correctAnswer: question.options[question.correct],
                    isCorrect: isCorrect,
                    explanation: question.explanation || `The correct answer is: ${question.options[question.correct]}`
                });
            });

            const score = Math.round((correct / currentQuiz.questions.length) * 100);
            
            // Award XP points based on quiz score
            // Base XP: 100 points, bonus for high scores
            let xpEarned = 100;
            if (score >= 90) {
                xpEarned = 150; // Excellent bonus
            } else if (score >= 70) {
                xpEarned = 120; // Good bonus
            }
            
            const currentXP = parseInt(localStorage.getItem('astrolearn_xp_points') || '0');
            const newXP = currentXP + xpEarned;
            localStorage.setItem('astrolearn_xp_points', newXP.toString());
            
            // Add to recent activity
            addToRecentActivity({
                type: 'quiz',
                action: 'Completed',
                title: currentQuiz.title,
                subject: currentSubject,
                score: score,
                timestamp: new Date().toISOString()
            });
            
            // Update progress
            updateSubjectProgress(currentSubject);
            
            document.getElementById('quizInterface').classList.add('hidden');
            document.getElementById('quizResults').classList.remove('hidden');
            
            document.getElementById('resultScore').textContent = score + '%';
            document.getElementById('resultMessage').textContent = `You got ${correct} out of ${currentQuiz.questions.length} questions correct!`;
            
            if (score >= 90) {
                document.getElementById('resultIcon').textContent = 'üåü';
                document.getElementById('resultTitle').textContent = 'Excellent Work!';
            } else if (score >= 70) {
                document.getElementById('resultIcon').textContent = 'üëç';
                document.getElementById('resultTitle').textContent = 'Good Job!';
            } else {
                document.getElementById('resultIcon').textContent = 'üìö';
                document.getElementById('resultTitle').textContent = 'Keep Practicing!';
            }
            
            // Display detailed question review
            displayQuestionReview(results);
            
            // Retake button
            document.getElementById('retakeQuizBtn').onclick = () => {
                startQuiz(currentQuiz.id, currentQuiz.title);
            };
        }
        
        function displayQuestionReview(results) {
            const reviewDiv = document.getElementById('questionReview');
            reviewDiv.innerHTML = results.map((result, index) => `
                <div class="glass-card p-4 ${result.isCorrect ? 'border-l-4 border-green-500' : 'border-l-4 border-red-500'}">
                    <div class="flex items-start justify-between mb-2">
                        <h4 class="font-bold text-lg">Question ${index + 1}</h4>
                        <span class="text-2xl">${result.isCorrect ? '‚úÖ' : '‚ùå'}</span>
                    </div>
                    <p class="mb-3 text-[#F5F7FA]/90">${result.question}</p>
                    <div class="space-y-2">
                        <div class="flex items-center gap-2">
                            <span class="font-semibold">Your answer:</span>
                            <span class="${result.isCorrect ? 'text-green-400' : 'text-red-400'}">${result.userAnswer}</span>
                        </div>
                        ${!result.isCorrect ? `
                            <div class="flex items-center gap-2">
                                <span class="font-semibold">Correct answer:</span>
                                <span class="text-green-400">${result.correctAnswer}</span>
                            </div>
                        ` : ''}
                        <div class="mt-2 p-2 bg-[#4FC3F7]/10 rounded text-sm">
                            <strong>Explanation:</strong> ${result.explanation}
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function addToRecentActivity(activity) {
            const activities = JSON.parse(localStorage.getItem('astrolearn_recent_activities') || '[]');
            activities.unshift(activity);
            if (activities.length > 50) activities.pop();
            localStorage.setItem('astrolearn_recent_activities', JSON.stringify(activities));
        }
        
        function updateSubjectProgress(subject) {
            window.dispatchEvent(new CustomEvent('progressUpdated', { detail: { subject } }));
        }
    </script>
</body>
</html>


